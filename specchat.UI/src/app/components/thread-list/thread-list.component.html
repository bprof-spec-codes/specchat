<div class="d-flex flex-column flex-shrink-0 p-3 h-100 gap-2" *ngIf="selectedChat != null; else noElementsToDisplay">
    <div class="flex-grow-1 pt-auto position-relative overflow-scroll chat-scroll">
        <ul class="w-100">
          <li *ngFor="let msg of showMsgs()">
            <div class="d-flex gap-2">
              <img src="http://placehold.it/50/55C1E7/fff&text=U"
                    alt="User Avatar"
                    class="rounded float-start"
                    width="45"
                    height="45"/>
              <div class="w-100">
                  <div class="d-flex justify-content-between">
                      <strong class="primary-font">{{msg.user?.userName}}</strong>
                      <small class="pull-right text-muted">
                        <i class="bi bi-clock"></i>{{dateParser(msg.time)}}
                      </small>
                  </div>
                  <p id="{{msg.id}}">
                      {{msg.content}}
                  </p>
              </div>
            </div>
            <div class="message-actions hide-actions">
              <div class="btn-group">
                <button class="btn btn-dark" placement="bottom" ngbTooltip="Nice job!">😊</button>
                <button class="btn btn-dark" placement="bottom" ngbTooltip="Completed">✅</button>
                <button class="btn btn-dark" placement="bottom" ngbTooltip="I love it!">❤️</button>
                <button class="btn btn-dark" placement="bottom" ngbTooltip="Reply in thread"
                        (click)="newMessage.focus()"><i class="bi bi-chat-text"></i></button>
                <button class="btn btn-dark" placement="bottom" ngbTooltip="Reply to thread"
                        (click)="onMainMessageClick(msg)"><i class="bi bi-reply"></i></button>
                <button class="btn btn-dark" placement="bottom" ngbTooltip="Pin message"
                  *ngIf="user.role == 'Teacher'" (click)="pinMsg(msg.id)"><i class="bi bi-pin-angle"></i></button>
                <div class="btn-group dropup" *ngIf="msg.userId == user.id">
                  <button type="button" class="btn btn-dark" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="bi bi-three-dots-vertical"></i>
                  </button>
                  <ul class="dropdown-menu">
                    <li><a class="dropdown-item" (click)="editMessage(msg.id)">Edit message</a></li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item link-danger" (click)="deleteMessage(msg.id)">Delete message</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </li>
        </ul>
    </div>
    <div class="d-flex flex-row align-items-center gap-2">
      <img class="rounded-circle" src="https://i.imgur.com/RpzrMR2.jpg" width="30">
      <div class="form-floating flex-fill">
        <textarea #newMessage class="form-control" placeholder="Leave a comment here" id="newMessage" style="resize:none"></textarea>
        <label for="newMessage">Message #{{selectedChat.name}}</label>
      </div>
      <button class="btn btn-primary btn-sm shadow-none" type="button" (click)="sendMessage(newMessage.value)"><i class="bi bi-arrow-right-square"></i></button>
    </div>    
  </div>
  <ng-template #noElementsToDisplay>
    <div class="h-100 w-100 d-flex align-items-center justify-content-center">
      <span class="fw-bolder text-muted">
        There is no thread selected
      </span>
    </div>
  </ng-template>